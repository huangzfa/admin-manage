<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.duobei.core.message.dao.SmsTempletDao" >

  <resultMap id="BaseResultMap" type="com.duobei.core.message.domain.SmsTemplet" extends="com.duobei.core.message.dao.mapper.SmsTempletMapper.BaseResultMap">
  </resultMap>

  <select id="querySmsTempletList" parameterType="com.duobei.core.message.domain.criteria.SmsTempletCriteria" resultMap="BaseResultMap">
    select
    a.*
    from pub_sms_templet a
    <where>
      <trim prefix="(" prefixOverrides="and" suffix=")">
        <if test="templetCode != null and templetCode != ''">
          AND a.templet_code LIKE CONCAT('%',#{templetCode},'%')
        </if>
        <if test="smsUserfulCode != null and smsUserfulCode != ''">
          AND a.sms_userful_code = #{smsUserfulCode}
        </if>
        AND a.is_delete=0
      </trim>
    </where>
    ORDER BY a.add_time desc
    <if test="pagesize != 0">
      LIMIT #{offset}, #{pagesize}
    </if>
  </select>


  <select id="getTempletByTempletCodeAndPlatform" parameterType="String" resultMap="BaseResultMap">
		select
		a.*
		from pub_sms_templet a
		where a.templet_code = #{templetCode} and a.platform = #{platform}
	</select>

  <update id="updateSmsTemplet" parameterType="com.duobei.core.message.domain.SmsTemplet">
    update pub_sms_templet a
    <set>
      <if test="smsUserfulCode != null">
        a.sms_userful_code = #{smsUserfulCode,jdbcType=VARCHAR},
      </if>
      <if test="templetCode != null">
        a.templet_code = #{templetCode,jdbcType=VARCHAR},
      </if>
      <if test="templetContent != null">
        a.templet_content = #{templetContent,jdbcType=VARCHAR},
      </if>
      <if test="templetParams != null">
        a.templet_params = #{templetParams,jdbcType=VARCHAR},
      </if>
      <if test="platform != null">
        a.platform = #{platform,jdbcType=VARCHAR},
      </if>
      <if test="status != null">
        a.status = #{status,jdbcType=INTEGER},
      </if>
      <if test="desc != null">
        a.desc = #{desc,jdbcType=VARCHAR},
      </if>
      <if test="addTime != null">
        a.add_time = #{addTime,jdbcType=TIMESTAMP},
      </if>
      <if test="modifyTime != null">
        a.modify_time = #{modifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="addOperatorId != null">
        a.add_operator_id = #{addOperatorId,jdbcType=INTEGER},
      </if>
      <if test="addOperatorName != null">
        a.add_operator_name = #{addOperatorName,jdbcType=VARCHAR},
      </if>
      <if test="modifyOperatorId != null">
        a.modify_operator_id = #{modifyOperatorId,jdbcType=INTEGER},
      </if>
      <if test="modifyOperatorName != null">
        a.modify_operator_name = #{modifyOperatorName,jdbcType=VARCHAR},
      </if>
      <if test="isDelete != null">
        a.is_delete = #{isDelete,jdbcType=INTEGER},
      </if>
    </set>
    where a.id = #{id,jdbcType=INTEGER}
  </update>

</mapper>